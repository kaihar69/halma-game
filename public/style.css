:root {
    /* --- EDLE FARBPALETTE --- */
    
    /* Hintergrund: Dunkles Leder/Filz */
    --body-bg: #1a1a1a; 
    --body-texture: radial-gradient(circle at center, #2c2c2c 0%, #0f0f0f 100%);

    /* Brett: Poliertes Mahagoni */
    --board-bg: #4a2c22; 
    --board-finish: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(0,0,0,0.2) 100%);
    --board-rim: #cba358; /* Gebürstetes Gold/Messing */
    
    /* Mulden */
    --hole-bg: #2e1a13;
    --hole-shadow: inset 3px 3px 10px rgba(0,0,0,0.8), inset -1px -1px 2px rgba(255,255,255,0.2);
    --hole-rim: #cba358; /* Goldener Ring im Loch */

    /* Zonen-Markierung (Dezentes Leuchten) */
    --zone-red: rgba(192, 57, 43, 0.4);
    --zone-green: rgba(39, 174, 96, 0.4);

    /* STEINE (Juwelen-Töne) */
    --red-piece-1: #c0392b; --red-piece-2: #922b21;
    --green-piece-1: #2ecc71; --green-piece-2: #218c53;
    
    --highlight: #f39c12; /* Goldener Zug-Hinweis */
    --text-color: #e0e0e0; /* Helles Creme für Text */
}

body {
    font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
    background: var(--body-bg);
    background-image: var(--body-texture);
    margin: 0; padding: 0;
    height: 100vh; overflow: hidden;
    display: flex; flex-direction: column; align-items: center;
    color: var(--text-color);
}

/* --- LOBBY (Dunkle Eleganz) --- */
#landing-view {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); z-index: 2000;
    display: flex; justify-content: center; align-items: center;
}
.landing-card {
    background: #2c2c2c; color: var(--text-color); padding: 40px; border-radius: 12px;
    text-align: center; width: 90%; max-width: 400px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.6); border: 1px solid #444;
}
.landing-card h1 { margin-top: 0; font-weight: 300; letter-spacing: 2px; color: var(--board-rim); }
.landing-card p { color: #aaa; font-style: italic; }
.landing-card input { 
    width: 100%; padding: 12px; margin: 15px 0; 
    background: #1a1a1a; border: 1px solid #444; color: white;
    border-radius: 6px; font-size: 1rem; box-sizing: border-box; text-align: center; 
}
.landing-card input:focus { border-color: var(--board-rim); outline: none; }
.big-btn { 
    width: 100%; padding: 15px; border: none; 
    background: linear-gradient(to bottom, #cba358, #a67c34); /* Gold Verlauf */
    color: #1a1a1a; cursor: pointer; border-radius: 6px; 
    font-size: 1.1rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3); margin-top: 10px;
    transition: all 0.2s;
}
.big-btn:hover { filter: brightness(1.1); }
.big-btn:active { transform: translateY(2px); box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
.big-btn.outline { background: transparent; border: 2px solid var(--board-rim); color: var(--board-rim); box-shadow: none; }
.divider { margin: 20px 0; color: #666; font-size: 0.8rem; letter-spacing: 2px; }
.join-area { display: flex; gap: 10px; }
.join-area input, .join-area button { margin: 0; flex: 1; }

/* --- GAME HEADER (Dunkel & Gold) --- */
.top-section { 
    padding: 15px; width: 100%; text-align: center; 
    background: linear-gradient(to bottom, #2c2c2c, #1a1a1a);
    box-shadow: 0 5px 20px rgba(0,0,0,0.5); z-index: 100;
    border-bottom: 2px solid var(--board-rim);
}
#header-info { font-size: 1.1rem; color: #aaa; padding: 5px; }
#current-room-code { color: var(--board-rim); font-family: monospace; }

#identity-badge {
    display: inline-block; padding: 8px 20px; border-radius: 30px; 
    background: #0f0f0f; color: #fff; font-size: 0.9rem; margin-top: 10px;
    border: 2px solid #333; box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    text-transform: uppercase; letter-spacing: 1px;
}

#setup-controls { margin-top: 15px; }
.action-btn { 
    background: linear-gradient(to bottom, var(--highlight), #d35400);
    border: none; padding: 10px 30px; color: white; border-radius: 30px; 
    cursor: pointer; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.4); 
    text-transform: uppercase; letter-spacing: 1px; transition: all 0.2s;
}
.action-btn:hover { filter: brightness(1.1); transform: translateY(-2px); }

/* --- DAS BRETT (Das Herzstück) --- */
.board-wrapper {
    flex: 1; display: flex; justify-content: center; align-items: center; width: 100%;
    padding: 20px; box-sizing: border-box;
    perspective: 1000px; /* Für leichte 3D Wirkung */
}

#board-container {
    width: min(95vw, calc(100vh - 250px));
    height: min(95vw, calc(100vh - 250px));
    position: relative;
    border-radius: 30px;
    padding: 25px;
    
    /* Mahagoni Look */
    background-color: var(--board-bg);
    background-image: 
        var(--board-finish),
        /* Simuliert feine Holzmaserung */
        repeating-linear-gradient(45deg, rgba(0,0,0,0.03) 0px, rgba(0,0,0,0.03) 2px, transparent 2px, transparent 8px);
    
    /* Der goldene Rahmen und tiefe Schatten */
    box-shadow: 
        0 30px 60px rgba(0,0,0,0.6), /* Schlagschatten auf den Tisch */
        inset 0 0 0 3px var(--board-rim), /* Goldkante innen */
        inset 0 0 30px rgba(0,0,0,0.5); /* Tiefe innen */
    
    border: 3px solid #1a1a1a; /* Äußerer dunkler Rand */
    transform: rotateX(5deg); /* Leichte Neigung zum Spieler */
}

#board {
    width: 100%; height: 100%;
    display: grid;
    grid-template-rows: repeat(17, 1fr); 
    grid-template-columns: repeat(25, 1fr);
    aspect-ratio: 25 / 15;
}

/* --- DIE MULDEN (Edle Vertiefungen) --- */
.cell {
    width: 82%; height: 82%; margin: auto;
    border-radius: 50%;
    background-color: var(--hole-bg);
    position: relative;
    /* Tiefer Schatten + Goldener Inlay-Ring */
    box-shadow: 
        var(--hole-shadow),
        0 0 0 1px rgba(203, 163, 88, 0.3); /* Subtiler Goldring */
    transition: all 0.3s;
}
.cell.void { background: transparent; box-shadow: none; pointer-events: none; }

/* Zonen Markierung (Edles Leuchten von innen) */
.cell.base-red { 
    background-color: var(--zone-red); 
    box-shadow: var(--hole-shadow), inset 0 0 15px var(--zone-red);
}
.cell.base-green { 
    background-color: var(--zone-green);
    box-shadow: var(--hole-shadow), inset 0 0 15px var(--zone-green);
}

/* --- DIE FIGUREN (Polierte Edelsteine) --- */
.piece {
    width: 86%; height: 86%;
    border-radius: 50%;
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
    cursor: default;

    /* Glasierter Look */
    border: 1px solid rgba(255,255,255,0.4);
    /* Tiefer, schwerer Schatten */
    box-shadow: 4px 4px 15px rgba(0,0,0,0.6), inset 0 -5px 10px rgba(0,0,0,0.3);
    background: linear-gradient(135deg, var(--p-c1), var(--p-c2));
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
/* Der Glanzpunkt (Scharf und hell) */
.piece::after {
    content: ''; position: absolute; top: 12%; left: 12%; width: 30%; height: 30%;
    background: linear-gradient(to bottom right, rgba(255,255,255,0.9), rgba(255,255,255,0.1)); 
    border-radius: 50%; filter: blur(1px);
}

.piece.red { --p-c1: var(--red-piece-1); --p-c2: var(--red-piece-2); }
.piece.green { --p-c1: var(--green-piece-1); --p-c2: var(--green-piece-2); }

/* Feedback: Meine Steine */
.piece.mine { cursor: pointer; }
.piece.mine:hover { transform: translate(-50%, -53%) scale(1.03); filter: brightness(1.1); }

/* Ausgewählt (Schwebt und leuchtet golden) */
.piece.selected {
    border-color: var(--highlight);
    box-shadow: 0 0 25px var(--highlight), 5px 15px 30px rgba(0,0,0,0.7);
    transform: translate(-50%, -65%) scale(1.15);
    z-index: 100;
}

/* Mögliche Züge (Goldenes Leuchten) */
.cell.valid-move {
    box-shadow: inset 0 0 20px var(--highlight), 0 0 5px var(--highlight);
    cursor: pointer;
}
.cell.valid-move::after {
    content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 25%; height: 25%; background: var(--highlight); border-radius: 50%;
    box-shadow: 0 0 10px var(--highlight);
}

/* --- FOOTER --- */
.controls { 
    padding: 20px; width: 100%; 
    background: linear-gradient(to top, #2c2c2c, #1a1a1a);
    border-top: 2px solid var(--board-rim); text-align: center; 
}
#log-container { 
    font-weight: 300; letter-spacing: 1px; color: var(--board-rim); 
    font-size: 1rem; min-height: 25px; text-shadow: 0 2px 5px rgba(0,0,0,0.5);
}

.emote-bar { display: flex; justify-content: center; gap: 20px; margin-top: 15px; }
.emote-bar button { 
    font-size: 1.8rem; background: transparent; border: none; cursor: pointer; 
    transition: transform 0.2s; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5));
}
.emote-bar button:hover { transform: scale(1.2) rotate(5deg); }

/* Emojis */
.floating-emoji {
    position: fixed; top: 50%; left: 50%; font-size: 5rem;
    animation: floatUp 3s ease-out forwards; pointer-events: none; z-index: 9999;
    text-shadow: 0 5px 20px rgba(0,0,0,0.5);
}
